(this["webpackJsonpcodigo4-pos"]=this["webpackJsonpcodigo4-pos"]||[]).push([[0],{40:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),r=a(23),s=a.n(r),o=a(11),i=a(5),l=Object(c.createContext)(),j=function(e){var t=e.path,a=e.componente,r=Object(c.useContext)(l),s=r.autenticado;return r.cargando?Object(n.jsx)("h1",{className:"display-4",children:"Cargando..."}):s?Object(n.jsx)(i.b,{path:t,component:a}):Object(n.jsx)(i.a,{to:"/"})},u=function(){return Object(n.jsxs)("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark",children:[Object(n.jsx)("a",{className:"navbar-brand",href:"!#",children:"Navbar"}),Object(n.jsx)("button",{className:"navbar-toggler d-lg-none",type:"button","data-toggle":"collapse","data-target":"#collapsibleNavId","aria-controls":"collapsibleNavId","aria-expanded":"false","aria-label":"Toggle navigation"}),Object(n.jsxs)("div",{className:"collapse navbar-collapse",id:"collapsibleNavId",children:[Object(n.jsxs)("ul",{className:"navbar-nav mr-auto mt-2 mt-lg-0",children:[Object(n.jsx)("li",{className:"nav-item active",children:Object(n.jsxs)("a",{className:"nav-link",href:"!#",children:["Home ",Object(n.jsx)("span",{className:"sr-only",children:"(current)"})]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)("a",{className:"nav-link",href:"!#",children:"Link"})}),Object(n.jsxs)("li",{className:"nav-item dropdown",children:[Object(n.jsx)("a",{className:"nav-link dropdown-toggle",href:"!#",id:"dropdownId","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:"Dropdown"}),Object(n.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"dropdownId",children:[Object(n.jsx)("a",{className:"dropdown-item",href:"!#",children:"Action 1"}),Object(n.jsx)("a",{className:"dropdown-item",href:"!#",children:"Action 2"})]})]})]}),Object(n.jsxs)("form",{className:"form-inline my-2 my-lg-0",children:[Object(n.jsx)("input",{className:"form-control mr-sm-2",type:"text",placeholder:"Search"}),Object(n.jsx)("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit",children:"Search"})]})]})]})},d=function(){return Object(n.jsx)("div",{children:"MOSTRANDO LA VISTA ADMINDASHBOARDSCREEN"})},b=function(){return Object(n.jsx)("div",{children:"MOSTRANDO LA VISTA DE LOS PEDIDOS SCREEN"})},p=a(3),O=a.n(p),m=a(4),h=a(6),f="https://codigo4-pos.herokuapp.com",x=function(){var e=Object(m.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/plato"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(m.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/plato"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(m.a)(O.a.mark((function e(t,a){var n,c,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("plato_id",t),n.append("imagen",a),e.next=5,fetch("".concat(f,"/imagen/upload"),{method:"POST",body:n});case 5:return c=e.sent,e.next=8,c.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),g=a(14),N=a(2),C=a(12),S=a.n(C),y=function(){var e=Object(m.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/categoria"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(m.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/categoria/").concat(t,"/platos"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A={plato_nom:"",plato_pre:0,categoria_id:0},I=function(e){var t=e.traerPlatos,a=Object(c.useState)(A),r=Object(h.a)(a,2),s=r[0],o=r[1],i=Object(c.useState)([]),l=Object(h.a)(i,2),j=l[0],u=l[1],d=Object(c.useRef)(),b=function(){var e=Object(m.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:(t=e.sent).ok&&u(t.content);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){b()}),[]);var p=function(e){o(Object(N.a)(Object(N.a)({},s),{},Object(g.a)({},e.target.name,e.target.value)))};return Object(n.jsx)("div",{className:"row mb-4",children:Object(n.jsx)("div",{className:"col",children:Object(n.jsx)("div",{className:"card shadow",children:Object(n.jsx)("div",{className:"card-body",children:Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),S.a.fire({title:"Espere...",text:"Estamos subiendo la informaci\xf3n al servidor",icon:"info",showConfirmButton:!1,allowOutsideClick:!1});var a=Object(N.a)(Object(N.a)({},s),{},{plato_img:""});_(a).then((function(e){if(e.ok){var a=e.content.plato_id;v(a,d.current.files[0]).then((function(e){e.ok&&(t(),o(A),d.current.value="",S.a.fire({title:"Hecho!",icon:"success",text:"El plato y su imagen fueron creados con \xe9xito",timer:1500,showConfirmButton:!1}))}))}}))},children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",children:"Nombre del Plato"}),Object(n.jsx)("input",{type:"text",placeholder:"Ejm: Cebiche",className:"form-control",name:"plato_nom",value:s.plato_nom,onChange:p})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",children:"Precio del Plato:"}),Object(n.jsx)("input",{type:"number",className:"form-control",value:s.plato_pre,onChange:p,name:"plato_pre"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",children:"Seleccione Categor\xeda"}),Object(n.jsxs)("select",{name:"categoria_id",className:"form-control",value:s.categoria_id,onChange:p,children:[Object(n.jsx)("option",{value:"0",children:"--Seleccione Categor\xeda--"}),j.map((function(e){return Object(n.jsx)("option",{value:e.categoria_id,children:e.categoria_nom},e.categoria_id)}))]})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",children:"Imagen del plato:"}),Object(n.jsx)("input",{type:"file",className:"form-control",ref:d})]}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Crear Plato"})})]})})})})})},k=function(e){var t=e.platos;return Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col",children:Object(n.jsx)("div",{className:"card shadow",children:Object(n.jsx)("div",{className:"card-body",children:Object(n.jsx)("div",{className:"table-responsive",children:Object(n.jsxs)("table",{className:"table table-hover table-bordered table-striped",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Id"}),Object(n.jsx)("th",{children:"Nombre"}),Object(n.jsx)("th",{children:"Precio"}),Object(n.jsx)("th",{children:"Imagen Plato"}),Object(n.jsx)("th",{children:"Categoria"}),Object(n.jsx)("th",{children:"Acciones"})]})}),Object(n.jsx)("tbody",{children:t.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.plato_id}),Object(n.jsx)("td",{children:e.plato_nom}),Object(n.jsx)("td",{children:e.plato_pre}),Object(n.jsx)("td",{children:Object(n.jsx)("img",{src:e.plato_img,alt:"imagen del plato",width:"150"})}),Object(n.jsx)("td",{children:e.Categorium.categoria_nom}),Object(n.jsx)("td",{children:"Acciones"})]},e.plato_id)}))})]})})})})})})},E=function(){var e=Object(c.useState)([]),t=Object(h.a)(e,2),a=t[0],r=t[1],s=function(){var e=Object(m.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:(t=e.sent).ok&&r(t.content);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){s()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(I,{traerPlatos:s}),Object(n.jsx)(k,{platos:a})]})},P=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(u,{}),Object(n.jsx)("main",{className:"container pt-5",children:Object(n.jsxs)(i.d,{children:[Object(n.jsx)(j,{path:"/admin/platos",componente:E}),Object(n.jsx)(i.b,{path:"/admin/pedidos",component:b}),Object(n.jsx)(i.b,{path:"/admin",component:d})]})})]})},R=function(){var e=Object(m.a)(O.a.mark((function e(t,a){var n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/login"),{method:"POST",body:JSON.stringify({correo:t,password:a}),headers:{"Content-type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),L=function(){var e=Object(m.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/verificar"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){var t=e.history,a=Object(c.useContext)(l).iniciarSesion,r=Object(c.useState)({correo:"",password:""}),s=Object(h.a)(r,2),o=s[0],i=s[1],j=function(e){i(Object(N.a)(Object(N.a)({},o),{},Object(g.a)({},e.target.name,e.target.value)))};return Object(n.jsx)("main",{className:"login",children:Object(n.jsxs)("div",{className:"login__form",children:[Object(n.jsx)("h1",{children:"Inicio de Sesi\xf3n"}),Object(n.jsxs)("form",{className:"formulario",onSubmit:function(e){e.preventDefault(),R(o.correo,o.password).then((function(e){e.ok&&(a(e.token),t.push("/pos/control"))}))},children:[Object(n.jsx)("label",{htmlFor:"",children:"Email:"}),Object(n.jsx)("input",{name:"correo",onChange:j,value:o.correo,type:"email",className:"formulario__input",placeholder:"Email"}),Object(n.jsx)("label",{htmlFor:"",children:"Password:"}),Object(n.jsx)("input",{value:o.password,onChange:j,name:"password",type:"password",className:"formulario__input",placeholder:"Password"}),Object(n.jsx)("button",{className:"formulario__submit",type:"submit",children:"Iniciar Sesi\xf3n"})]})]})})},M=(a(40),function(){return Object(n.jsx)(i.d,{children:Object(n.jsx)(i.b,{path:"/auth",component:D})})}),B=function(){return Object(n.jsxs)("div",{className:"bg-dark",style:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Object(n.jsx)("h1",{className:"display-1 text-white",children:"Home de CodiGo - POS"}),Object(n.jsx)(o.b,{className:"btn btn-outline-success btn-lg",to:"/auth",children:"Ir a Login"})]})},T=function(){return Object(n.jsx)(i.d,{children:Object(n.jsx)(i.b,{path:"/",component:B})})},G=Object(c.createContext)(),F=function(){var e=Object(c.useState)([]),t=Object(h.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(!0),o=Object(h.a)(s,2),i=o[0],l=o[1],j=Object(c.useContext)(G),u=j.globalObjCategoria,d=j.seleccionarCategoriaGlobal,b=function(){var e=Object(m.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:(t=e.sent).ok&&(r(t.content),l(!1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){b()}),[]),Object(n.jsx)("div",{className:"carta__categorias",children:i?Object(n.jsx)("span",{children:"Cargando..."}):a.map((function(e){return Object(n.jsx)("button",{className:"boton boton-outline-primary \n                ".concat((null===u||void 0===u?void 0:u.categoria_id)===e.categoria_id?"activo":""),onClick:function(){d(Object(N.a)({},e))},children:e.categoria_nom},e.categoria_id)}))})},J=function(e){var t=e.plato;return Object(n.jsxs)("li",{className:"comanda__item",children:[Object(n.jsxs)("p",{className:"comanda__nombre",children:[Object(n.jsx)("span",{children:Object(n.jsx)("strong",{children:t.plato_nom})}),Object(n.jsxs)("span",{children:["Precio: S/ ",t.plato_pre]})]}),Object(n.jsx)("p",{className:"comanda__cantidad",children:t.plato_cant}),Object(n.jsx)("p",{className:"comanda__precio",children:Object(n.jsxs)("strong",{children:["S/ ",+t.plato_cant*+t.plato_pre]})})]})},H=function(){var e,t=Object(c.useContext)(G),a=t.globalPedidos,r=t.globalObjMesa,s=t.globalPagar;return r&&(e=a.find((function(e){return e.mesa_id===r.mesa_id}))),Object(n.jsxs)("div",{className:"comanda",children:[Object(n.jsx)("h4",{className:"comanda__mesa",children:"Mesa 01"}),Object(n.jsx)("p",{className:"comanda__usuario",children:"Carlos Jimenez"}),Object(n.jsx)("hr",{}),Object(n.jsx)("ul",{className:"comanda__lista",children:r?e?e.platos.map((function(e){return Object(n.jsx)(J,{plato:e},e.plato_id)})):Object(n.jsx)("span",{children:"Esta mesa no tiene pedidos"}):Object(n.jsx)("span",{children:"No se ha seleccionado ninguna mesa \ud83d\ude44"})}),Object(n.jsx)("button",{className:"boton boton-success boton-block",onClick:function(){r&&S.a.fire({title:"Confirmar Pago",text:"Los cambios se har\xe1n efecto en la base de datos",icon:"question",showCancelButton:!0}).then((function(e){e.isConfirmed&&s()}))},children:"PAGAR"})]})},U=a.p+"static/media/logo.32d5c4da.svg",Z=a.p+"static/media/search.c031f9ef.svg",Y=Object(i.g)((function(e){var t=e.history,a=Object(c.useContext)(l),r=a.usu_nom,s=a.cerrarSesion;return Object(n.jsxs)("header",{className:"header",children:[Object(n.jsx)("div",{className:"header__logo",children:Object(n.jsx)("img",{src:U,alt:""})}),Object(n.jsxs)("div",{className:"header__buscador",children:[Object(n.jsx)("img",{src:Z,alt:""}),Object(n.jsx)("input",{type:"text",className:"header__input",placeholder:"Busca un t\xe9rmino"})]}),Object(n.jsxs)("div",{className:"header__usuario",children:[Object(n.jsx)("img",{src:"https://randomuser.me/api/portraits/men/90.jpg",alt:""}),Object(n.jsx)("span",{children:r}),Object(n.jsx)("button",{className:"btn btn-outline-danger",onClick:function(){s(),t.replace("/")},children:"Cerrar Sesi\xf3n"})]})]})})),z=function(){var e=Object(m.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/mesa"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(e){var t=e.objMesa,a=Object(c.useContext)(G),r=a.globalObjMesa,s=a.seleccionarMesaGlobal,o="";return(null===r||void 0===r?void 0:r.mesa_id)===t.mesa_id&&(o="activo"),Object(n.jsxs)("li",{className:"mesas__mesa ".concat(o),onClick:function(){s(Object(N.a)({},t))},children:[Object(n.jsx)("span",{className:"mesas__titulo",children:"Mesa"}),Object(n.jsx)("span",{className:"mesas__numero",children:t.mesa_nro})]})},q=function(){var e=Object(c.useState)([]),t=Object(h.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(!0),o=Object(h.a)(s,2),i=o[0],l=o[1],j=function(){var e=Object(m.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:(t=e.sent).ok&&(r(t.content),l(!1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){j()}),[]),Object(n.jsxs)("div",{className:"mesas",children:[Object(n.jsx)("ul",{className:"mesas__lista",children:!0===i?Object(n.jsx)("span",{children:"cargando..."}):a.map((function(e){return Object(n.jsx)(V,{objMesa:e},e.mesa_id)}))}),Object(n.jsx)("div",{className:"mesas__info"})]})},K=a.p+"static/media/plato_blanco.255e60bc.svg",Q=function(){return Object(n.jsx)("nav",{className:"menu",children:Object(n.jsxs)("ul",{className:"menu__lista",children:[Object(n.jsxs)("li",{children:[Object(n.jsx)("img",{src:K,alt:""}),Object(n.jsx)("span",{children:"Bebidas"})]}),Object(n.jsxs)("li",{children:[Object(n.jsx)("img",{src:K,alt:""}),Object(n.jsx)("span",{children:"Bebidas"})]}),Object(n.jsxs)("li",{children:[Object(n.jsx)("img",{src:K,alt:""}),Object(n.jsx)("span",{children:"Bebidas"})]}),Object(n.jsxs)("li",{children:[Object(n.jsx)("img",{src:K,alt:""}),Object(n.jsx)("span",{children:"Bebidas"})]})]})})},W=function(e){var t=e.objPlato,a=Object(c.useContext)(G),r=a.agregarPlato,s=a.restarPlato;return Object(n.jsxs)("div",{className:"carta__plato",children:[Object(n.jsx)("img",{src:t.plato_img,alt:"imagen del plato"}),Object(n.jsx)("h4",{className:"carta__titulo",children:t.plato_nom}),Object(n.jsxs)("span",{className:"carta__precio",children:["S/ ",t.plato_pre]}),Object(n.jsxs)("div",{className:"carta__botones",children:[Object(n.jsx)("button",{className:"boton boton-outline-primary boton-restar",onClick:function(){s(Object(N.a)({},t))},children:"-1"}),Object(n.jsx)("button",{className:"boton boton-outline-primary boton-sumar",onClick:function(){r(Object(N.a)({},t))},children:"+1"})]})]})},X=function(){var e=Object(c.useState)([]),t=Object(h.a)(e,2),a=t[0],r=t[1],s=Object(c.useContext)(G).globalObjCategoria,o=function(){var e=Object(m.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:a=e.sent,r(a.content.Platos);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){null!==s&&o(s.categoria_id)}),[s]),Object(n.jsx)("div",{className:"carta__platos",children:a.map((function(e){return Object(n.jsx)(W,{objPlato:e},e.plato_id)}))})},$=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Y,{}),Object(n.jsxs)("main",{className:"pos-container",children:[Object(n.jsx)(Q,{}),Object(n.jsxs)("section",{className:"tabla",children:[Object(n.jsx)(q,{}),Object(n.jsxs)("div",{className:"pedido",children:[Object(n.jsxs)("div",{className:"carta",children:[Object(n.jsx)(F,{}),Object(n.jsx)(X,{})]}),Object(n.jsxs)("div",{className:"boleta",children:[Object(n.jsx)("h3",{children:"Pedido"}),Object(n.jsx)(H,{})]})]})]})]})]})},ee=(a(41),a(18)),te=function(e,t){switch(t.type){case"SELECCIONAR_MESA":return Object(N.a)(Object(N.a)({},e),{},{globalObjMesa:Object(N.a)({},t.data)});case"SELECCIONAR_CATEGORIA":return Object(N.a)(Object(N.a)({},e),{},{globalObjCategoria:Object(N.a)({},t.data)});case"ACTUALIZAR_GLOBAL_PEDIDOS":return Object(N.a)(Object(N.a)({},e),{},{globalPedidos:Object(ee.a)(t.data)})}},ae=a(25),ne=a.n(ae),ce=function(){var e=Object(m.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/pedido"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(e){var t=Object(c.useReducer)(te,{globalObjMesa:null,globalObjCategoria:null,globalPedidos:[]}),a=Object(h.a)(t,2),r=a[0],s=a[1];return Object(n.jsx)(G.Provider,{value:{globalObjMesa:r.globalObjMesa,globalObjCategoria:r.globalObjCategoria,globalPedidos:r.globalPedidos,seleccionarMesaGlobal:function(e){s({type:"SELECCIONAR_MESA",data:Object(N.a)({},e)})},seleccionarCategoriaGlobal:function(e){s({type:"SELECCIONAR_CATEGORIA",data:Object(N.a)({},e)})},agregarPlato:function(e){var t=r.globalObjMesa,a=r.globalPedidos;if(null!==t){var n=a.find((function(e){return e.mesa_id===t.mesa_id}));if(n){if(n.platos.find((function(t){return t.plato_id===e.plato_id}))){var c=a.map((function(a){return a.mesa_id===t.mesa_id&&a.platos.map((function(t){return t.plato_id===e.plato_id&&t.plato_cant++,t})),a}));s({type:"ACTUALIZAR_GLOBAL_PEDIDOS",data:c})}else{var o=a.map((function(a){return a.mesa_id===t.mesa_id&&a.platos.push(Object(N.a)(Object(N.a)({},e),{},{plato_cant:1})),a}));s({type:"ACTUALIZAR_GLOBAL_PEDIDOS",data:o})}}else{var i=[].concat(Object(ee.a)(a),[{total:e.plato_pre,mesa_id:t.mesa_id,platos:[Object(N.a)(Object(N.a)({},e),{},{plato_cant:1})]}]);s({type:"ACTUALIZAR_GLOBAL_PEDIDOS",data:i})}}},restarPlato:function(e){var t=r.globalPedidos,a=r.globalObjMesa;if(null!==a){var n=t.find((function(e){return e.mesa_id===a.mesa_id}));n&&(n.platos=n.platos.filter((function(t){return t.plato_id===e.plato_id?1===t.plato_cant?void 0:(t.plato_cant--,t):t})),0===n.platos.length&&(t=t.filter((function(e){return e.mesa_id!==a.mesa_id}))),s({type:"ACTUALIZAR_GLOBAL_PEDIDOS",data:t}))}},globalPagar:function(){var e=r.globalPedidos.find((function(e){return r.globalObjMesa.mesa_id===e.mesa_id})).platos.map((function(e){return{plato_id:e.plato_id,pedidoplato_cant:e.plato_cant}})),t={usu_id:1,mesa_id:r.globalObjMesa.mesa_id,pedido_est:"pagado",pedido_nro:"100",pedido_fech:ne()().format("YYYY-MM-DD HH:mm:ss"),pedidoplatos:e};ce(t).then((function(e){if(console.log(e),e.ok){S.a.fire({title:"Pago Registrado!",text:"El pago se ha realizado exitosamente",icon:"success",timer:1500,showConfirmButton:!1});var t=r.globalPedidos.filter((function(e){return e.mesa_id!==r.globalObjMesa.mesa_id}));s({type:"ACTUALIZAR_GLOBAL_PEDIDOS",data:t})}}))}},children:e.children})},se=function(){return Object(n.jsx)(re,{children:Object(n.jsx)(i.d,{children:Object(n.jsx)(j,{path:"/pos/control",componente:$})})})},oe=function(){return Object(n.jsx)(o.a,{children:Object(n.jsxs)(i.d,{children:[Object(n.jsx)(i.b,{path:"/pos",component:se}),Object(n.jsx)(i.b,{path:"/admin",component:P}),Object(n.jsx)(i.b,{path:"/auth",component:M}),Object(n.jsx)(i.b,{path:"/",exact:!0,component:T})]})})},ie=function(e,t){switch(t.type){case"INICIAR_SESION":return Object(N.a)(Object(N.a)({},e),{},{usu_id:t.data.usu_id,usu_nom:t.data.usu_nom,token:t.data.token,autenticado:!0,cargando:!1});case"CERRAR_SESION":return localStorage.removeItem("token"),Object(N.a)(Object(N.a)({},e),{},{usu_id:null,usu_nom:null,token:null,autenticado:!1,cargando:!1})}},le=function(e){var t=Object(c.useReducer)(ie,{autenticado:!1,usu_nom:null,usu_id:null,token:null,cargando:!0}),a=Object(h.a)(t,2),r=a[0],s=a[1];Object(c.useEffect)((function(){!function(){var e=localStorage.getItem("token");e?L(e).then((function(t){if(t.ok){var a=e.split(".")[1],n=window.atob(a),c=JSON.parse(n);s({type:"INICIAR_SESION",data:Object(N.a)(Object(N.a)({},c),{},{token:e})})}else s({type:"CERRAR_SESION"})})):s({type:"CERRAR_SESION"})}()}),[]);return Object(n.jsx)(l.Provider,{value:{usu_nom:r.usu_nom,usu_id:r.usu_id,autenticado:r.autenticado,cargando:r.cargando,iniciarSesion:function(e){var t=e.split(".")[1],a=window.atob(t),n=JSON.parse(a);localStorage.setItem("token",e),s({type:"INICIAR_SESION",data:Object(N.a)(Object(N.a)({},n),{},{token:e})})},cerrarSesion:function(){s({type:"CERRAR_SESION"})}},children:e.children})},je=function(){return Object(n.jsx)(le,{children:Object(n.jsx)(oe,{})})};s.a.render(Object(n.jsx)(je,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.6ada1cf9.chunk.js.map